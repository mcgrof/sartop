# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with
code in this repository.

## Project Overview

SARTop is a lightweight console-based system activity monitoring tool that provides
real-time visualization of SAR (System Activity Reporter) data. It's designed to be
a terminal-friendly alternative to traditional monitoring tools, with a focus on
privacy (all data stays local) and SSH compatibility.

The tool monitors CPU, memory, network, and disk I/O performance with live terminal
graphs using Unicode characters. On exit, it automatically exports comprehensive
performance data in three formats: JSON for analysis, PNG plots for visualization,
and a text summary for quick review.

Key design principles:
- Single Python file, minimal dependencies (Python 3.6+ standard library + optional matplotlib)
- Real-time terminal UI with color-coded metrics
- Automatic data export with consistent naming: {hostname}-{timestamp}.[json|_plot.png|_summary.txt]
- Creative visualizations including dual-direction I/O graphs and unicode intensity meters

## One commit per change

As with the Linux kernel, this project prefers commits to be atomic and to
the point. We don't want spell fixes to be blended in with code changes.
Spell fixes should go into separate commits. When in doubt, just don't do
any spell fixes unless asked explicitly to do that.

## Use the Signed-off-by tag

We want to use the Signed-off-by tag which embodies the application of the
Developer Certificate or Origin. Use the git configured user name and email
for the Signed-off-by tag (check with `git config user.name` and
`git config user.email`).

## Use Generated-by: Claude AI

Use this tag for code generated by Claude code AI. Put this before the
Signed-off-by tag.

**CRITICAL FORMATTING RULE**: When using "Generated-by: Claude AI", it MUST be
immediately followed by the "Signed-off-by:" tag with NO empty lines between them.
These two lines must be consecutive.

Correct format:
```
Subject line

Detailed description of changes...

Generated-by: Claude AI
Signed-off-by: Your Name <email@example.com>
```

**WRONG** - Do NOT add empty lines between Generated-by and Signed-off-by:
```
Generated-by: Claude AI

Signed-off-by: Your Name <email@example.com>
```

**WRONG** - Do NOT add extra empty lines:
```
Generated-by: Claude AI


Signed-off-by: Your Name <email@example.com>
```

## Avoid Shopping cart lists

Generative AI seems to like to make commit logs long itemized lists of things
it did. This is stupid. This should be avoided. It is creating very silly
commit logs. Use plain english and get to the point. Be as clear a possible
and get to the point of not what you want to communicate, but rather what
will make a reviewer easily understand what the heck you are implementing.

You should *think* hard about your commit log, always.

## Code Quality Requirements

**IMPORTANT**: Before completing any work, you MUST run `make style` to check for
both whitespace issues and commit message formatting. This ensures code consistency
and prevents formatting issues from being introduced into the codebase.

The style checker will identify:
- Trailing whitespace
- Mixed tabs and spaces
- Files without newlines at EOF
- Other whitespace-related issues
- Incorrect commit message formatting (Generated-by/Signed-off-by spacing)

Fix all reported issues before submitting your work. The `make style` command
checks both file whitespace and the most recent commit message format.

### Automatic Whitespace Fixing

For convenience, you can automatically fix whitespace issues using:
```bash
python3 scripts/fix_whitespace_issues.py              # Fix all modified files
python3 scripts/fix_whitespace_issues.py file1 file2  # Fix specific files
```

The fixer script will:
- Remove trailing whitespace from lines
- Add missing newlines at end of files
- Reduce excessive blank lines to maximum 2 consecutive

Always run `make style` after using the fixer to verify all issues are resolved.

### Verifying commit has no white space damage

Run the following after you commit something:
```bash
make fix-whitespace-last-commit
```

This will fix all white space only for new files you add.
